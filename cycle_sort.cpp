#include<iostream> 
#include <algorithm>
#include <chrono>
using namespace std;

void cycle_sort(int A[], int n){
	
    int writes = 0;

    for (int inicio= 0; inicio <= n - 2; inicio++) {
        
        int item = A[inicio];
		int pos = inicio;
        
        for (int i = inicio + 1; i < n; i++){
            if (A[i] < item){
			
                pos++;
            }
    	}

        
        if (pos == inicio){
		
            continue;
        }

        
        while (item == A[pos]){
            pos += 1;
		}
		
        if (pos != inicio) {
            swap(item, A[pos]);
            writes++;
        }

        
        while (pos != inicio) {
            pos = inicio;

            
            for (int i = inicio + 1; i < n; i++){
			
                if (A[i] < item){
					pos += 1;
                }
			}
			
            
            while (item == A[pos]){
			
                pos += 1;
			}
            
            if (item != A[pos]) {
                swap(item, A[pos]);
                writes++;
            }
        }
    }

    
    cout << writes << endl ;
}


int main(){
	
	int tam;
	 
	
	int arreglo[]{ 6356, 8893, 2532, 6922, 9644, 5387, 2700, 5946, 7200, 5521,
1686, 4505, 5449, 5858, 4375, 8012, 6663, 1508, 8207, 2219,
4657, 975, 9109, 6773, 588, 7331, 327, 2354, 494, 7999,
8300, 9737, 1364, 2783, 1981, 580, 8000, 7542, 611, 1392,
6231, 4028, 834, 5241, 1498, 5610, 3863, 9862, 6690, 6628,
8942, 3073, 3170, 8501, 9544, 1050, 88, 785, 4506, 4540,
7028, 5815, 5657, 1791, 8284, 3639, 9653, 9888, 1215, 771,
3891, 1118, 2968, 3319, 384, 1606, 790, 1405, 5122, 8834,
1450, 6045, 2545, 4205, 7600, 787, 3078, 3274, 8466, 67,
9971, 9333, 7417, 241, 804, 8074, 9093, 956, 1412, 982,
3535, 9450, 371, 7051, 1517, 970, 4102, 4327, 4870, 9574,
7983, 1926, 9206, 5304, 3343, 6359, 1140, 5374, 4202, 941,
2499, 9649, 9801, 2919, 230, 5458, 5541, 2003, 7271, 3558,
4515, 9214, 2633, 9828, 3963, 6718, 3020, 5580, 4382, 580,
4866, 4923, 7287, 6204, 5888, 972, 9825, 2263, 2102, 9985,
7945, 1611, 9395, 3954, 4005, 3465, 1923, 3060, 6053, 9824,
2266, 8526, 8681, 6384, 2997, 1097, 6356, 3249, 1823, 4006,
6079, 9525, 9793, 1364, 9489, 7099, 1694, 642, 173, 2789,
2222, 9746, 5421, 5677, 633, 5038, 2286, 5587, 1303, 4815,
763, 618, 2261, 8428, 559, 3508, 7003, 1552, 7013, 7067,
6540, 4127, 8210, 1234, 8253, 218, 6053, 107, 8329, 7393,
3966, 9098, 4516, 1657, 2749, 1897, 1967, 2142, 2972, 3117,
5068, 1595, 9712, 6297, 9714, 5159, 955, 6354, 2147, 2434,
9782, 4196, 8988, 7616, 2254, 6067, 9500, 213, 4524, 788,
3465, 6402, 8777, 6028, 5423, 2895, 7665, 3560, 9579, 1066,
5159, 1871, 6728, 4447, 5178, 4374, 3047, 8872, 7607, 6067,
1044, 8550, 7983, 1796, 5254, 1633, 1083, 9760, 5143, 1948,
221, 5837, 6278, 2797, 8040, 2100, 6505, 2508, 146, 627,
3926, 8633, 3800, 1346, 5988, 1827, 8291, 2423, 9421, 5206,
715, 6845, 8663, 5957, 3785, 6019, 2932, 2665, 7265, 5569,
1910, 3432, 7312, 2016, 215, 1033, 7650, 3355, 6136, 6951,
1783, 2048, 6968, 2692, 3542, 252, 9368, 1296, 723, 3622,
268, 1898, 1869, 8266, 5092, 7046, 2667, 9689, 5580, 9920,
297, 3198, 8881, 80, 7741, 6149, 6389, 1055, 3199, 6743,
6117, 7321, 1944, 3449, 6633, 9347, 1498, 6518, 8507, 3358,
7456, 6746, 220, 6636, 5127, 7424, 8307, 1618, 654, 158,
1031, 9168, 9370, 8800, 3023, 7485, 1229, 658, 1256, 3830,
1672, 1202, 7832, 7657, 7774, 2213, 5120, 1260, 3402, 56,
167, 3156, 1252, 7866, 948, 899, 5937, 5097, 5868, 4113 };

	//calculammos el tamano del arreglo	
	tam=sizeof(arreglo) / sizeof(arreglo[0]);
	//marcamos tiempo de inicio
	chrono::steady_clock::time_point begin = chrono::steady_clock::now();
	cycle_sort(arreglo, tam);
	//tiempo final
	chrono::steady_clock::time_point end = chrono::steady_clock::now();
	
	//mostrar resultados
	cout << "time difference = "<<endl;
    cout << chrono::duration_cast<chrono::milliseconds>(end - begin).count() << " [ms]" << endl;
    cout << chrono::duration_cast<chrono::microseconds>(end - begin).count() << " [Âµs]" << endl;
    cout << chrono::duration_cast<chrono::nanoseconds>(end - begin).count() << " [ns]" << endl;
    
    //mostrar arreglo ordenado
	for(int i=0; i<tam; i++){
		cout<<"["<<arreglo[i]<<"]"<<" ";
	}
}


